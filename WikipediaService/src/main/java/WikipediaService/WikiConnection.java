package WikipediaService;import retrofit2.Response;import retrofit2.Retrofit;import retrofit2.converter.scalars.ScalarsConverterFactory;import java.io.IOException;class WikiConnection implements APIConnection {    private final String url = "https://en.wikipedia.org/w/";    private WikipediaAPI wikiAPI;    private FormatHelper formatHelper;    WikiConnection(FormatHelper formatHelper){        Retrofit retrofit = new Retrofit.Builder()                .baseUrl(url)                .addConverterFactory(ScalarsConverterFactory.create())                .build();        this.formatHelper = formatHelper;        wikiAPI = retrofit.create(WikipediaAPI.class);    }    @Override public WikiDefinition getDefinition(String term) throws Exception{        String meaning = getFormattedMeaning(term);        meaning = formatToString(meaning);        return new WikiDefinition(term,meaning);    }    private String getFormattedMeaning(String string) throws Exception{        String result = null;        try {            Response<String> callResponse = wikiAPI.getTerm(string).execute();            result = callResponse.body();        } catch (IOException e) {            throw new Exception("No se pudo conectar con la Wikipedia.\n Disculpe las molestias.");        }        return result;    }    private String formatToString(String meaning){        String text = null;        if(meaning!=null)            text = formatHelper.formatToString(meaning);        return text;    }}